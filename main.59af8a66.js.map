{"version":3,"sources":["scripts/main.js"],"names":["button","document","querySelector","messageLose","messageWin","messageStart","score","rows","columns","gameField","random","rowsRandom","Math","floor","colRandom","count","updateField","row","col","classList","remove","fieldRow","querySelectorAll","innerHTML","r","c","children","className","add","reset","slider","course","fieldCol","i","length","push","slide","reverse","res","numbers","filter","el","x","addEventListener","includes","body","e","code"],"mappings":"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","file":"main.59af8a66.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst button = document.querySelector('.button');\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\nconst messageStart = document.querySelector('.message-start');\n\nlet score = 0;\nconst rows = 4;\nconst columns = 4;\n\nlet gameField = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\nconst random = () => {\n  const rowsRandom = Math.floor(Math.random() * rows);\n  const colRandom = Math.floor(Math.random() * columns);\n  const randomNumber = Math.floor(Math.random() * 10);\n  const count = randomNumber < 9 ? 4 : 2;\n\n  if (gameField[rowsRandom][colRandom] === 0) {\n    gameField[rowsRandom][colRandom] = count;\n\n    updateField();\n  } else {\n    for (const row in gameField) {\n      for (const col in gameField[row]) {\n        if (gameField[row][col] === 0) {\n          random();\n\n          return;\n        }\n      }\n    }\n    messageLose.classList.remove('hidden');\n  }\n};\n\nconst updateField = () => {\n  const fieldRow = document.querySelectorAll('.field-row');\n  const gameScore = document.querySelector('.game-score');\n\n  gameScore.innerHTML = score;\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (gameField[r][c] === 0) {\n        fieldRow[r].children[c].innerHTML = '';\n        fieldRow[r].children[c].className = '';\n        fieldRow[r].children[c].classList.add('field-cell');\n      } else {\n        fieldRow[r].children[c].innerHTML = gameField[r][c];\n        fieldRow[r].children[c].className = '';\n        fieldRow[r].children[c].classList.add('field-cell');\n\n        fieldRow[r].children[c].classList.add(`field-cell--${gameField[r][c]}`);\n      }\n    }\n  }\n};\n\nconst reset = () => {\n  const fieldRow = document.querySelectorAll('.field-row');\n\n  messageLose.classList.add('hidden');\n  messageWin.classList.add('hidden');\n\n  score = 0;\n\n  gameField = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      fieldRow[r].children[c].innerHTML = '';\n      fieldRow[r].children[c].className = '';\n      fieldRow[r].children[c].classList.add('field-cell');\n    }\n  }\n};\n\nconst slider = (course) => {\n  const fieldCol = [\n    [],\n    [],\n    [],\n    [],\n  ];\n\n  for (let r = 0; r < rows; r++) {\n    for (let i = 0; i < gameField[r].length; i++) {\n      fieldCol[r].push(gameField[i][r]);\n    }\n\n    let row = gameField[r];\n\n    switch (course) {\n      case 'left':\n        row = gameField[r];\n        row = slide(row);\n        gameField[r] = row;\n        break;\n\n      case 'right':\n        row = gameField[r];\n        row.reverse();\n        row = slide(row);\n        row.reverse();\n        gameField[r] = row;\n        break;\n\n      case 'up':\n        row = fieldCol[r];\n        row = slide(row);\n        fieldCol[r] = row;\n        break;\n\n      case 'down':\n        row = fieldCol[r];\n        row.reverse();\n        row = slide(row);\n        row.reverse();\n        fieldCol[r] = row;\n        break;\n    }\n  }\n\n  if (course === 'up' || course === 'down') {\n    for (let r = 0; r < rows; r++) {\n      for (let c = 0; c < columns; c++) {\n        gameField[c][r] = fieldCol[r][c];\n      }\n    }\n  }\n};\n\nconst slide = (res) => {\n  let numbers = res.filter(el => el !== 0);\n\n  for (let col = 0; col < numbers.length; col++) {\n    if (numbers[col] === numbers[col + 1]) {\n      numbers[col] *= 2;\n      score += numbers[col];\n      numbers[col + 1] = 0;\n\n      if (numbers[col] === 2048) {\n        messageWin.classList.remove('hidden');\n      }\n    }\n  }\n\n  numbers = numbers.filter(x => x !== 0);\n\n  while (numbers.length < columns) {\n    numbers.push(0);\n  }\n\n  return numbers;\n};\n\nbutton.addEventListener('click', () => {\n  button.classList.add('restart');\n  button.classList.remove('Start');\n\n  if (button.className.includes('restart')) {\n    button.innerHTML = 'Restart';\n    messageStart.classList.add('hidden');\n  }\n  reset();\n\n  random();\n  random();\n});\n\ndocument.body.addEventListener('keyup', (e) => {\n  if (button.className.includes('restart')) {\n    switch (e.code) {\n      case 'ArrowLeft':\n        slider('left');\n        random();\n        break;\n\n      case 'ArrowRight':\n        slider('right');\n        random();\n        break;\n\n      case 'ArrowUp':\n        slider('up');\n        random();\n        break;\n\n      case 'ArrowDown':\n        slider('down');\n        random();\n        break;\n    }\n  }\n});\n"]}